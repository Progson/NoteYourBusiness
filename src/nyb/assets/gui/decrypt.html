<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NoteYourBusiness — Odszyfruj pliki/foldery</title>
  <style>
    :root{
      --bg:#0b0d13; --card:rgba(255,255,255,.06); --card-2:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.18); --text:#e8eaed; --muted:#a8b0bd;
      --accent:#f8b43a; --accent-2:#ffde91; --danger:#ff6b6b; --success:#35d07f;
      --shadow:0 10px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.06);
      --radius:18px; --radius-lg:22px;
    }
    .light{ --bg:#fbfbfd; --card:rgba(0,0,0,.04); --card-2:rgba(0,0,0,.06); --stroke:rgba(0,0,0,.10);
      --text:#0b0d13; --muted:#4c5563; --shadow:0 6px 18px rgba(62,73,87,.20), inset 0 1px 0 rgba(255,255,255,.4); }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0; font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;
      color:var(--text); background:radial-gradient(1200px 600px at 80% -10%, rgba(248,180,58,.25), transparent),
      radial-gradient(800px 400px at -10% 120%, rgba(248,180,58,.18), transparent), var(--bg);}
    header{position:sticky; top:0; z-index:10; backdrop-filter:blur(8px);
      background:linear-gradient(to bottom, rgba(0,0,0,.38), transparent); border-bottom:1px solid var(--stroke);}
    .wrap{max-width:1100px; margin:0 auto; padding:16px 22px; display:flex; align-items:center; justify-content:space-between; gap:14px}
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit}
    .brand .title{font-weight:700; letter-spacing:.2px; font-size:clamp(18px,2vw,22px)}
    .logo{width:38px;height:38px; display:grid; place-items:center; position:relative}
    .logo::after{content:""; position:absolute; inset:-16px; background:radial-gradient(closest-side, rgba(248,180,58,.45), transparent 70%); filter:blur(8px); opacity:.8; pointer-events:none}

    .toggle{display:flex; align-items:center; gap:10px}
    .switch{position:relative; width:56px; height:32px; border-radius:999px; background:var(--card); border:1px solid var(--stroke); box-shadow:var(--shadow); cursor:pointer; transition:.25s}
    .dot{position:absolute; top:50%; left:4px; translate:0 -50%; width:24px; height:24px; border-radius:50%; background:linear-gradient(180deg, var(--accent-2), var(--accent)); box-shadow:0 6px 14px rgba(248,180,58,.45); transition:.3s cubic-bezier(.2,.8,.2,1)}
    body.light .dot{left:28px}

    main{max-width:1100px; margin:26px auto 40px; padding:0 22px}
    .card{background:linear-gradient(180deg, var(--card-2), var(--card)); border:1px solid var(--stroke); box-shadow:var(--shadow); border-radius:var(--radius-lg); overflow:hidden}
    .card-header{display:flex; align-items:center; justify-content:space-between; gap:14px; padding:18px; border-bottom:1px solid var(--stroke); background:radial-gradient(340px 160px at 90% -30%, rgba(248,180,58,.14), transparent 70%)}
    .card-title{display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.2px}
    .card-title svg{filter:drop-shadow(0 12px 22px rgba(248,180,58,.35))}
    .toolbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 18px; border-bottom:1px dashed var(--stroke);}
    .left,.right{display:flex; align-items:center; gap:10px; flex-wrap:wrap}

    .btn{--pad:11px 14px; --bg:var(--card); --b:var(--stroke); --txt:var(--text);
      position:relative; display:inline-flex; gap:10px; align-items:center; justify-content:center;
      padding:var(--pad); border:1px solid var(--b); background:var(--bg); color:var(--txt);
      border-radius:12px; cursor:pointer; transition:.2s; box-shadow:var(--shadow)}
    .btn:hover{transform:translateY(-1px)}
    .btn:focus-visible{outline:3px solid var(--accent); outline-offset:2px}
    .btn.ghost{--bg:transparent; box-shadow:none}
    .btn.primary{--bg:linear-gradient(180deg, var(--accent-2), var(--accent)); --b:transparent; color:#1d1d1d; font-weight:700}
    .btn.primary[disabled]{opacity:.6; filter:grayscale(.2); cursor:not-allowed}
    .btn.danger{--bg:linear-gradient(180deg, #ffb1b1, var(--danger)); color:#191919}
    .btn .kbd{font:600 11px/1 ui-monospace,SFMono-Regular,Menlo,Consolas,Monaco,monospace; opacity:.7; padding:.2em .4em; border:1px solid var(--stroke); border-radius:6px}

    .hint{color:var(--muted)}
    .summary{padding:0 18px 10px; color:var(--muted)}
    .check{display:flex; align-items:center; gap:10px; user-select:none}
    .check input{appearance:none; width:22px; height:22px; border-radius:8px; border:1px solid var(--stroke); background:var(--card); display:grid; place-items:center; position:relative; transition:.2s}
    .check input::after{content:""; width:12px; height:12px; border-radius:4px; transform:scale(0); transition:.2s; background:linear-gradient(180deg, var(--accent-2), var(--accent))}
    .check input:checked::after{transform:scale(1)}
    .check input:focus-visible{outline:3px solid var(--accent); outline-offset:2px}

    .progress{padding:10px 18px; border-top:1px dashed var(--stroke); background:linear-gradient(to bottom, rgba(0,0,0,.06), transparent)}
    .bar{height:10px; border-radius:999px; background:var(--card); border:1px solid var(--stroke); overflow:hidden; position:relative}
    .bar>span{position:absolute; inset:0 auto 0 0; width:0%; background:linear-gradient(90deg, var(--accent-2), var(--accent)); box-shadow:0 0 20px rgba(248,180,58,.35) inset; transition:width .45s cubic-bezier(.2,.8,.2,1)}
    .progress-top{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; color:var(--muted)}

    .table{padding:8px 10px 14px}
    table{width:100%; border-collapse:separate; border-spacing:0 8px}
    thead th{font-weight:700; text-align:left; color:var(--muted); font-size:13px; padding:0 10px}
    tbody tr{background:rgba(255,255,255,.04); border:1px solid var(--stroke); box-shadow:var(--shadow);}
    tbody td{padding:12px 10px; border-top:1px solid var(--stroke)}
    tbody tr:first-child td{border-top-left-radius:12px; border-top-right-radius:12px}
    tbody tr:last-child td{border-bottom-left-radius:12px; border-bottom-right-radius:12px}
    .status{display:inline-flex; align-items:center; gap:8px; padding:.25rem .55rem; border-radius:999px; border:1px solid var(--stroke); background:var(--card); font-weight:600; font-size:12px}
    .status.ok{background:rgba(53,208,127,.18); border-color:rgba(53,208,127,.5)}
    .status.err{background:rgba(255,107,107,.18); border-color:rgba(255,107,107,.5)}

    .card-footer{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:14px 18px; border-top:1px solid var(--stroke); background:linear-gradient(to top, rgba(0,0,0,.35), transparent); color:var(--muted)}

    .ripple{position:absolute; border-radius:50%; pointer-events:none; transform:translate(-50%,-50%) scale(0); animation:ripple .6s ease-out; background: radial-gradient(circle, rgba(248,180,58,.35), rgba(248,180,58,.1) 60%, transparent 70%)}
    @keyframes ripple{to{transform:translate(-50%,-50%) scale(8); opacity:0}}

    .spacer{flex:1} .nowrap{white-space:nowrap} .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <a class="brand" href="#" aria-label="NoteYourBusiness">
        <span class="logo" aria-hidden="true">
          <svg width="38" height="38" viewBox="0 0 64 64" fill="none" aria-hidden="true">
            <defs><linearGradient id="g1" x1="0" y1="0" x2="0" y2="1"><stop offset="0" stop-color="#ffde91"/><stop offset="1" stop-color="#f8b43a"/></linearGradient></defs>
            <rect x="10" y="9" width="30" height="36" rx="6" fill="url(#g1)"/><path d="M40 9v9a4 4 0 0 0 4 4h9" fill="#f1a51c"/>
            <rect x="17" y="18" width="16" height="3" rx="1.5" fill="#fff" opacity=".9"/><rect x="17" y="25" width="16" height="3" rx="1.5" fill="#fff" opacity=".9"/><rect x="17" y="32" width="16" height="3" rx="1.5" fill="#fff" opacity=".9"/>
            <rect x="34" y="32" width="20" height="16" rx="5" fill="#f1a51c"/><rect x="38" y="28" width="12" height="10" rx="6" fill="#f1a51c"/><circle cx="44" cy="40" r="3" fill="#d67f00"/>
          </svg>
        </span>
        <span class="title">NoteYourBusiness</span>
      </a>
      <div class="toggle" aria-label="Przełącz motyw">
        <span style="font-weight:600; color:var(--muted);">Motyw</span>
        <div class="switch" role="button" aria-pressed="false" tabindex="0" id="themeSwitch">
          <span class="dot"></span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="card" role="region" aria-labelledby="t1">
      <div class="card-header">
        <div class="card-title" id="t1">
          <svg width="26" height="26" viewBox="0 0 24 24" aria-hidden="true">
            <defs><linearGradient id="gold" x1="0" y1="0" x2="0" y2="1"><stop offset="0" stop-color="#ffde91"/><stop offset="1" stop-color="#f8b43a"/></linearGradient></defs>
            <path d="M12 2a6 6 0 0 1 6 6v2h1a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h1V8a6 6 0 0 1 6-6Zm0 2a4 4 0 0 0-4 4v2h8V8a4 4 0 0 0-4-4Z" fill="url(#gold)"/>
          </svg>
          <span style="font-size:clamp(18px,2vw,20px)">Odszyfruj pliki/foldery</span>
        </div>
      </div>

      <div class="toolbar">
        <div class="left">
          <button class="btn" id="addFiles">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8Zm0 0v6h6" opacity=".8"/></svg>
            <span>Wybierz pliki .nyb…</span>
          </button>
          <button class="btn" id="addFolders">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M10 4l2 2h8a2 2 0 0 1 2 2v2H2V6a2 2 0 0 1 2-2Z" opacity=".8"/><rect x="2" y="8" width="20" height="12" rx="2" fill="currentColor" opacity=".4"/></svg>
            <span>Wybierz folder…</span>
          </button>
          <div class="spacer"></div>
        </div>
        <div class="right">
          <label class="check" title="Przeszukuj podfoldery">
            <input type="checkbox" id="recursive" checked>
            <span>Rekursywnie</span>
          </label>
          <label class="check" title="Zostaw kopię .nyb po udanym odszyfrowaniu">
            <input type="checkbox" id="keepNyb">
            <span>Zachowaj kopię .nyb</span>
          </label>
          <button class="btn primary" id="startBtn" disabled>
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="#1d1d1d" d="M8 5v14l11-7z"/></svg>
            Start
          </button>
        </div>
      </div>

      <div class="summary"><span id="selectedCount">Wybrano: 0 elementów (kwalifikuje się: 0)</span></div>

      <div class="progress" aria-live="polite">
        <div class="progress-top">
          <div>Postęp</div>
          <div id="percent">0%</div>
        </div>
        <div class="bar" aria-hidden="true"><span id="barFill"></span></div>
      </div>

      <div class="table" role="table" aria-label="Lista elementów">
        <table>
          <thead>
            <tr>
              <th style="width:48%">Ścieżka</th>
              <th style="width:22%">Status</th>
              <th style="width:15%">Rozmiar</th>
              <th style="width:15%">Czas [ms]</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>

      <div class="card-footer">
        <div class="left">
          <button class="btn ghost" id="openFolder">Otwórz folder</button>
          <button class="btn ghost" id="copyReport">Kopiuj raport</button>
        </div>
        <div class="spacer"></div>
        <div class="right">
          <button class="btn" id="clearBtn">Wyczyść</button>
          <button class="btn danger" id="closeBtn">Zamknij</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="wrap" style="justify-content:space-between; color:var(--muted); font-size:13px">
      <div>© <span id="year"></span> <strong>patchersi.app</strong></div>
      <div class="nowrap">NoteYourBusiness</div>
    </div>
  </footer>

  <script>
    // Motyw
    const themeSwitch = document.getElementById('themeSwitch');
    const setPressed = (on)=> themeSwitch.setAttribute('aria-pressed', on?'true':'false');
    themeSwitch.addEventListener('click', ()=>{ document.body.classList.toggle('light'); setPressed(document.body.classList.contains('light')); });
    themeSwitch.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); themeSwitch.click(); }});
    // Ripple
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.btn'); if(!btn) return;
      const r = document.createElement('span'); r.className = 'ripple';
      const rect = btn.getBoundingClientRect();
      r.style.width = r.style.height = Math.max(rect.width, rect.height) + 'px';
      r.style.left = (e.clientX - rect.left) + 'px'; r.style.top = (e.clientY - rect.top) + 'px';
      btn.appendChild(r); r.addEventListener('animationend', ()=> r.remove());
    });
    // Rok w stopce
    document.getElementById('year').textContent = new Date().getFullYear();
    // Kopiuj raport
    document.getElementById('copyReport').addEventListener('click', () => {
      const rows = document.querySelectorAll('#rows tr');
      const lines = ['Ścieżka;Status;Rozmiar;Czas[ms]'];
      rows.forEach(tr => {
        const tds = tr.querySelectorAll('td');
        lines.push([tds[0].innerText, tds[1].innerText.trim(), tds[2].innerText, tds[3].innerText].join(';'));
      });
      navigator.clipboard.writeText(lines.join('\n'));
    });
  </script>
</body>
</html>
